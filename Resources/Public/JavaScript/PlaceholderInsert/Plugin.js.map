{
  "version": 3,
  "sources": ["../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/manifest.ts", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/createConsumerApi.ts", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/readFromConsumerApi.ts", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/registry/AbstractRegistry.ts", "../../../Private/PlaceholderInsert/node_modules/@neos-project/positional-array-sorter/src/positionalArraySorter.ts", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/registry/SynchronousRegistry.ts", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/registry/SynchronousMetaRegistry.ts", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/registry/index.ts", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/index.ts", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react-redux/index.js", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/react-ui-components/index.js", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react/index.js", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-decorators/index.js", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-redux-store/index.js", "../../../Private/PlaceholderInsert/src/PlaceholderInsertDropdown.js", "../../../Private/PlaceholderInsert/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/ckeditor5-exports/index.js", "../../../Private/PlaceholderInsert/src/placeholderInsertPlugin.js", "../../../Private/PlaceholderInsert/src/manifest.js", "../../../Private/PlaceholderInsert/src/index.js"],
  "sourcesContent": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, "import { connect } from \"react-redux\";\nimport { SelectBox } from \"@neos-project/react-ui-components\";\nimport React, { PureComponent } from \"react\";\nimport { neos } from \"@neos-project/neos-ui-decorators\";\nimport { selectors } from \"@neos-project/neos-ui-redux-store\";\n\nexport const parentNodeContextPath = contextPath => {\n  if (typeof contextPath !== \"string\") {\n    console.error(\"`contextPath` must be a string!\"); // tslint:disable-line\n    return null;\n  }\n  const [path, context] = contextPath.split(\"@\");\n\n  if (path.length === 0) {\n    // We are at top level; so there is no parent anymore!\n    return null;\n  }\n\n  return `${path.substr(0, path.lastIndexOf(\"/\"))}@${context}`;\n};\n\n@connect(\n  state => ({\n    nodesByContextPath: selectors.CR.Nodes.nodesByContextPathSelector(state),\n    focusedNode: selectors.CR.Nodes.focusedSelector(state)\n  })\n)\n@neos(globalRegistry => ({\n  i18nRegistry: globalRegistry.get(\"i18n\"),\n  nodeTypeRegistry: globalRegistry.get(\n    \"@neos-project/neos-ui-contentrepository\"\n  ),\n  frontendConfiguration: globalRegistry.get('frontendConfiguration')\n}))\n\nexport default class PlaceholderInsertDropdown extends PureComponent {\n  handleOnSelect = value => {\n    this.props.executeCommand(\"placeholderInsert\", value);\n  };\n\n  render() {\n    let options = [];\n\n    const [formPath, workspace] = parentNodeContextPath(\n      parentNodeContextPath(this.props.focusedNode.contextPath)\n    ).split(\"@\");\n\n    // get options of first page\n    const elementsPath = `${formPath}/elements@${workspace}`;\n\n    const elementsNode = this.props.nodesByContextPath[elementsPath];\n    if (!elementsNode) {\n      return null;\n    }\n    const firstPageOptions = this.getOptionsRecursively(elementsNode.children);\n    if (firstPageOptions && firstPageOptions.length > 0) {\n      options = options.concat(firstPageOptions);\n    }\n\n    // get options of further pages\n    const furtherPagesPath = `${formPath}/furtherpages@${workspace}`;\n    const furtherPagesNode = this.props.nodesByContextPath[furtherPagesPath];\n    if (furtherPagesNode && furtherPagesNode.children && furtherPagesNode.children.length > 0) {\n      furtherPagesNode.children.forEach(furtherPageChildren => {\n        if (furtherPageChildren) {\n          const pageOptions = this.getOptionsOfPage(furtherPageChildren);\n\n          if (pageOptions && pageOptions.length > 0) {\n            options = options.concat(pageOptions);\n          }\n        }\n      });\n    }\n\n    if (options.length === 0) {\n      return null;\n    }\n\n    const placeholderLabel = this.props.i18nRegistry.translate(\n      \"Neos.Form.Builder:Main:placeholder\",\n      \"Insert placeholder\"\n    );\n\n    return (\n      <SelectBox\n        placeholder={placeholderLabel}\n        options={options}\n        onValueChange={this.handleOnSelect}\n        value={null}\n      />\n    );\n  }\n\n  getOptionsOfPage(page) {\n    const [path, workspace] = page.contextPath.split(\"@\");\n    const elementsPath = `${path}/elements@${workspace}`;\n    const elementsNode = this.props.nodesByContextPath[elementsPath];\n    if (!elementsNode) {\n      return null;\n    }\n\n    return this.getOptionsRecursively(elementsNode.children);\n  }\n\n  getOptionsRecursively(elements) {\n    const {frontendConfiguration} = this.props;\n    const ignoreNodeTypeInDropdown = frontendConfiguration.get('Neos.Form.Builder:PlaceholderInsert').ignoreNodeTypeInDropdown;\n    const ignoreAllChildNodesOfNodeTypeInDropdown = frontendConfiguration.get('Neos.Form.Builder:PlaceholderInsert').ignoreAllChildNodesOfNodeTypeInDropdown;\n    const returnValues = [];\n\n    elements.forEach((element) => {\n      const node = this.props.nodesByContextPath[element.contextPath];\n      if (!node) {\n        return null;\n      }\n\n      if (!(ignoreNodeTypeInDropdown.hasOwnProperty(node.nodeType) && ignoreNodeTypeInDropdown[node.nodeType] === true)) {\n        returnValues.push({\n          value: node.properties.identifier || node.identifier,\n          label: node.properties.label || node.properties.identifier || node.identifier\n        });\n      }\n\n      if (!(ignoreAllChildNodesOfNodeTypeInDropdown.hasOwnProperty(node.nodeType) && ignoreAllChildNodesOfNodeTypeInDropdown[node.nodeType] === true)) {\n        const childNodes = this.props.nodesByContextPath[element.contextPath].children;\n        const childOptions = this.getOptionsRecursively(childNodes);\n\n        if (Array.isArray(childOptions)) {\n          childOptions.forEach(childOption => {\n            returnValues.push(childOption);\n          });\n        }\n      }\n    });\n\n    return returnValues;\n  }\n}\n", null, "import { ModelText, Command, Plugin } from \"ckeditor5-exports\";\n\nclass PlaceholderInsertCommand extends Command {\n  execute(value) {\n    const model = this.editor.model;\n    const doc = model.document;\n    const selection = doc.selection;\n    const placeholder = new ModelText(\"{\" + value + \"}\");\n    model.insertContent(placeholder, selection);\n  }\n}\n\nexport default class PlaceholderInsertPlugin extends Plugin {\n  static get pluginName() {\n    return \"PlaceholderInsert\";\n  }\n  init() {\n    const editor = this.editor;\n\n    editor.commands.add(\n      \"placeholderInsert\",\n      new PlaceholderInsertCommand(this.editor)\n    );\n  }\n}\n", "import manifest from \"@neos-project/neos-ui-extensibility\";\nimport PlaceholderInsertDropdown from \"./PlaceholderInsertDropdown\";\nimport placeholderInsertPlugin from \"./placeholderInsertPlugin\";\n\nconst addPlugin = (Plugin, isEnabled) => (ckEditorConfiguration, options) => {\n  if (!isEnabled || isEnabled(options.editorOptions, options)) {\n    ckEditorConfiguration.plugins = ckEditorConfiguration.plugins || [];\n    return {\n      ...ckEditorConfiguration,\n      plugins: [\n        ...(ckEditorConfiguration.plugins ?? []),\n        Plugin\n      ]\n    };\n  }\n  return ckEditorConfiguration;\n};\n\nmanifest(\"Neos.Form.Builder:PlaceholderInsert\", {}, globalRegistry => {\n  const richtextToolbar = globalRegistry\n    .get(\"ckEditor5\")\n    .get(\"richtextToolbar\");\n  richtextToolbar.set(\"placeholderInsertt\", {\n    component: PlaceholderInsertDropdown,\n    isVisible: editorOptions => editorOptions?.formatting?.placeholderInsert\n  });\n\n  const config = globalRegistry.get(\"ckEditor5\").get(\"config\");\n  config.set(\n    \"placeholderInsert\",\n    addPlugin(placeholderInsertPlugin, editorOptions => editorOptions?.formatting?.placeholderInsert)\n  );\n});\n", "require(\"./manifest\");\n"],
  "mappings": "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",
  "names": ["init_manifest", "__esmMin", "init_createConsumerApi", "__esmMin", "init_manifest", "readFromConsumerApi", "key", "args", "init_readFromConsumerApi", "__esmMin", "init_AbstractRegistry", "__esmMin", "init_positionalArraySorter", "__esmMin", "init_SynchronousRegistry", "__esmMin", "init_AbstractRegistry", "init_positionalArraySorter", "init_SynchronousMetaRegistry", "__esmMin", "init_SynchronousRegistry", "init_registry", "__esmMin", "init_SynchronousRegistry", "init_SynchronousMetaRegistry", "dist_default", "init_dist", "__esmMin", "init_createConsumerApi", "init_readFromConsumerApi", "init_registry", "readFromConsumerApi", "require_react_redux", "__commonJSMin", "exports", "module", "init_readFromConsumerApi", "readFromConsumerApi", "require_react_ui_components", "__commonJSMin", "exports", "module", "init_readFromConsumerApi", "readFromConsumerApi", "require_react", "__commonJSMin", "exports", "module", "init_readFromConsumerApi", "readFromConsumerApi", "require_neos_ui_decorators", "__commonJSMin", "exports", "module", "init_readFromConsumerApi", "readFromConsumerApi", "require_neos_ui_redux_store", "__commonJSMin", "exports", "module", "init_readFromConsumerApi", "readFromConsumerApi", "import_react_redux", "import_react_ui_components", "import_react", "import_neos_ui_decorators", "import_neos_ui_redux_store", "parentNodeContextPath", "PlaceholderInsertDropdown", "init_PlaceholderInsertDropdown", "__esmMin", "contextPath", "path", "context", "value", "options", "formPath", "workspace", "elementsPath", "elementsNode", "firstPageOptions", "furtherPagesPath", "furtherPagesNode", "furtherPageChildren", "pageOptions", "placeholderLabel", "React", "page", "elements", "frontendConfiguration", "ignoreNodeTypeInDropdown", "ignoreAllChildNodesOfNodeTypeInDropdown", "returnValues", "element", "node", "childNodes", "childOptions", "childOption", "__decorateClass", "state", "globalRegistry", "require_ckeditor5_exports", "__commonJSMin", "exports", "module", "init_readFromConsumerApi", "readFromConsumerApi", "import_ckeditor5_exports", "PlaceholderInsertCommand", "PlaceholderInsertPlugin", "init_placeholderInsertPlugin", "__esmMin", "value", "model", "selection", "placeholder", "manifest_exports", "addPlugin", "init_manifest", "__esmMin", "init_dist", "init_PlaceholderInsertDropdown", "init_placeholderInsertPlugin", "Plugin", "isEnabled", "ckEditorConfiguration", "options", "dist_default", "globalRegistry", "PlaceholderInsertDropdown", "editorOptions", "PlaceholderInsertPlugin"]
}
