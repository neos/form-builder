(()=>{var oe=Object.create;var b=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var se=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty;var l=(e,t)=>()=>(e&&(t=e(e=0)),t);var h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var S=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of se(t))!ie.call(e,s)&&s!==r&&b(e,s,{get:()=>t[s],enumerable:!(o=I(t,s))||o.enumerable});return e};var m=(e,t,r)=>(r=e!=null?oe(ne(e)):{},S(t||!e||!e.__esModule?b(r,"default",{value:e,enumerable:!0}):r,e)),ce=e=>S(b({},"__esModule",{value:!0}),e),R=(e,t,r,o)=>{for(var s=o>1?void 0:o?I(t,r):t,c=e.length-1,i;c>=0;c--)(i=e[c])&&(s=(o?i(t,r,s):i(s))||s);return o&&s&&b(t,r,s),s};var _=l(()=>{});var E=l(()=>{_()});function n(e){return(...t)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${e}`])return window["@Neos:HostPluginAPI"][`@${e}`](...t);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var p=l(()=>{});var F=l(()=>{});var T=l(()=>{});var w=l(()=>{F();T()});var W=l(()=>{w()});var j=l(()=>{w();W()});var B,K=l(()=>{E();p();j();B=n("manifest")});var M=h((je,$)=>{p();$.exports=n("vendor")().reactRedux});var k=h((Ke,V)=>{p();V.exports=n("NeosProjectPackages")().ReactUiComponents});var U=h((Me,D)=>{p();D.exports=n("vendor")().React});var L=h((ke,H)=>{p();H.exports=n("NeosProjectPackages")().NeosUiDecorators});var q=h((Ue,Y)=>{p();Y.exports=n("NeosProjectPackages")().NeosUiReduxStore});var G,J,N,Q,C,z,f,X=l(()=>{G=m(M()),J=m(k()),N=m(U()),Q=m(L()),C=m(q()),z=e=>{if(typeof e!="string")return console.error("`contextPath` must be a string!"),null;let[t,r]=e.split("@");return t.length===0?null:`${t.substr(0,t.lastIndexOf("/"))}@${r}`},f=class extends N.PureComponent{constructor(){super(...arguments);this.handleOnSelect=r=>{this.props.executeCommand("placeholderInsert",r)}}render(){let r=[],[o,s]=z(z(this.props.focusedNode.contextPath)).split("@"),c=`${o}/elements@${s}`,i=this.props.nodesByContextPath[c];if(!i)return null;let d=this.getOptionsRecursively(i.children);d&&d.length>0&&(r=r.concat(d));let a=`${o}/furtherpages@${s}`,u=this.props.nodesByContextPath[a];if(u&&u.children&&u.children.length>0&&u.children.forEach(P=>{if(P){let O=this.getOptionsOfPage(P);O&&O.length>0&&(r=r.concat(O))}}),r.length===0)return null;let x=this.props.i18nRegistry.translate("Neos.Form.Builder:Main:placeholder","Insert placeholder");return N.default.createElement(J.SelectBox,{placeholder:x,options:r,onValueChange:this.handleOnSelect,value:null})}getOptionsOfPage(r){let[o,s]=r.contextPath.split("@"),c=`${o}/elements@${s}`,i=this.props.nodesByContextPath[c];return i?this.getOptionsRecursively(i.children):null}getOptionsRecursively(r){let{frontendConfiguration:o}=this.props,s=o.get("Neos.Form.Builder:PlaceholderInsert").ignoreNodeTypeInDropdown,c=o.get("Neos.Form.Builder:PlaceholderInsert").ignoreAllChildNodesOfNodeTypeInDropdown,i=[];return r.forEach(d=>{let a=this.props.nodesByContextPath[d.contextPath];if(!a)return null;if(s.hasOwnProperty(a.nodeType)&&s[a.nodeType]===!0||i.push({value:a.properties.identifier||a.identifier,label:a.properties.label||a.properties.identifier||a.identifier}),!(c.hasOwnProperty(a.nodeType)&&c[a.nodeType]===!0)){let u=this.props.nodesByContextPath[d.contextPath].children,x=this.getOptionsRecursively(u);Array.isArray(x)&&x.forEach(P=>{i.push(P)})}}),i}};f=R([(0,G.connect)(e=>({nodesByContextPath:C.selectors.CR.Nodes.nodesByContextPathSelector(e),focusedNode:C.selectors.CR.Nodes.focusedSelector(e)})),(0,Q.neos)(e=>({i18nRegistry:e.get("i18n"),nodeTypeRegistry:e.get("@neos-project/neos-ui-contentrepository"),frontendConfiguration:e.get("frontendConfiguration")}))],f)});var ee=h((qe,Z)=>{p();Z.exports=n("vendor")().CkEditor5});var g,A,y,te=l(()=>{g=m(ee()),A=class extends g.Command{execute(t){let r=this.editor.model,s=r.document.selection,c=new g.ModelText("{"+t+"}");r.insertContent(c,s)}},y=class extends g.Plugin{static get pluginName(){return"PlaceholderInsert"}init(){this.editor.commands.add("placeholderInsert",new A(this.editor))}}});var pe={};var le,re=l(()=>{K();X();te();le=(e,t)=>(r,o)=>!t||t(o.editorOptions,o)?(r.plugins=r.plugins||[],{...r,plugins:[...r.plugins??[],e]}):r;B("Neos.Form.Builder:PlaceholderInsert",{},e=>{e.get("ckEditor5").get("richtextToolbar").set("placeholderInsertt",{component:f,isVisible:o=>o?.formatting?.placeholderInsert}),e.get("ckEditor5").get("config").set("placeholderInsert",le(y,o=>o?.formatting?.placeholderInsert))})});re();})();
//# sourceMappingURL=Plugin.js.map
